<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: tokenizer.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: tokenizer.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import * as Utils from "./utils.mjs";

/** Tokenizer
* A flexible ngram tokenizer that can index a string using a range of lengths
* for substrings suitable for autocomplete indexing and fuzzy name matching
*/

export default class Tokenizer {
  constructor(opts = {}) {
    // default to trigram
    const MIN_DEFAULT = 3;
    const { min, max } = opts;

    this.min = min &amp;&amp; typeof min === 'number' &amp;&amp; min > 0 ? min : MIN_DEFAULT;
    this.max = max &amp;&amp; typeof max === 'number' &amp;&amp; max > this.min ? max : this.min;
  };

  /** tokenize
  * Splits a string into ngram tokens
  * To boost prefix matches, a start character \u0002 is prepended to the string
  * and used in the ngrams. This causes a sequence of characters at the start of both
  * a search query and a sought term to more tightly match than a similar series of
  * characters elsewhere in sought terms.
  */
  tokenize(name) {
    const norm_name = Utils.normalizeString(name);
    if (!norm_name) return [];

    const alltokens = new Set();
    let n = this.min;
    while (n &lt;= this.max) {
      if (norm_name.length &lt;= n) {
        alltokens.add(norm_name);
      } else {
        let i = 0;
        while (i &lt;= norm_name.length - n) {
          alltokens.add(norm_name.slice(i, i + n));
          i++;
        }
      }
      n++;
    }
    return Array.from(alltokens);
  };
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Hummingbird.html">Hummingbird</a></li><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#add">add</a></li><li><a href="global.html#addListener">addListener</a></li><li><a href="global.html#count">count</a></li><li><a href="global.html#debugLog">debugLog</a></li><li><a href="global.html#emit">emit</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getVariantTokens">getVariantTokens</a></li><li><a href="global.html#has">has</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#logTiming">logTiming</a></li><li><a href="global.html#maxScore">maxScore</a></li><li><a href="global.html#normalizeString">normalizeString</a></li><li><a href="global.html#off">off</a></li><li><a href="global.html#on">on</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#removeListener">removeListener</a></li><li><a href="global.html#START_OF_STRING_INDICATOR">START_OF_STRING_INDICATOR</a></li><li><a href="global.html#toJSON">toJSON</a></li><li><a href="global.html#tokenize">tokenize</a></li><li><a href="global.html#tokenScore">tokenScore</a></li><li><a href="global.html#warn">warn</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Feb 18 2021 20:19:14 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
