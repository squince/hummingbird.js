<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils.mjs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils.mjs</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import diacritics from 'diacritics';

/** Utils
* Collection of utility functions
*/

const START_OF_STRING_INDICATOR = "\u0002";
const REG_EXP_START_INDICATOR = /^\u0002/;

/** error
* logs an error message to the console and returns a new Error object
*/
export function error(message) {
  if (console.error) {
    console.error(message);
    return new Error(message);
  }
};

/** warn
* logs a warning message to the console
*/
export function warn(message) {
  if (console.warn) {
    return console.warn(message);
  }
};

/** debugLog
* logs a debug message to the console
*/
export function debugLog(msg) {
  return console.log(`${msg}`);
};

/** logTiming
* logs a message to the console preceded by time of day
*/
export function logTiming(msg, s) {
  const d = new Date();
  if (s) {
    console.log(`${d.toTimeString().split(' ')[0]}.${d.getMilliseconds()} - ${msg} in ${d - s} ms`);
  } else {
    console.log(`${d.toTimeString().split(' ')[0]}.${d.getMilliseconds()} - ${msg}`);
  }
  return d;
};

/** normalizeString
* takes a string and normalizes it for case and diacritics
*/
export function normalizeString(str) {
  let newStr = diacritics.remove((str.toString()).toLowerCase()).replace(REG_EXP_START_INDICATOR, '');
  return START_OF_STRING_INDICATOR.concat(newStr);
};

/** maxScore
* Returns the max score for a given string
*/
export function maxScore(phrase, tokenizer, prefixBoost) {
  let score = 0;
  if (!phrase) return score;

  for (const token in tokenizer.tokenize(phrase)) {
    score += this.tokenScore(token, false, prefixBoost);
  };
  return score;
};

/** tokenScore
* Returns the score for the given token
*/
export function tokenScore(token, isVariant, prefixBoost) {
  // default to boosting prefix matches unless explicitly set to false
  const boostPrefixMatch = prefixBoost == null ? true : prefixBoost;
  let score = token.length;
  if (boostPrefixMatch &amp;&amp; token.substring(0, 1) === START_OF_STRING_INDICATOR) score += 0.2;
  if (isVariant) score -= 0.4;

  return score;
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Hummingbird.html">Hummingbird</a></li><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#add">add</a></li><li><a href="global.html#addListener">addListener</a></li><li><a href="global.html#count">count</a></li><li><a href="global.html#debugLog">debugLog</a></li><li><a href="global.html#emit">emit</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#getVariantTokens">getVariantTokens</a></li><li><a href="global.html#has">has</a></li><li><a href="global.html#load">load</a></li><li><a href="global.html#logTiming">logTiming</a></li><li><a href="global.html#maxScore">maxScore</a></li><li><a href="global.html#normalizeString">normalizeString</a></li><li><a href="global.html#off">off</a></li><li><a href="global.html#on">on</a></li><li><a href="global.html#remove">remove</a></li><li><a href="global.html#removeListener">removeListener</a></li><li><a href="global.html#START_OF_STRING_INDICATOR">START_OF_STRING_INDICATOR</a></li><li><a href="global.html#toJSON">toJSON</a></li><li><a href="global.html#tokenize">tokenize</a></li><li><a href="global.html#tokenScore">tokenScore</a></li><li><a href="global.html#warn">warn</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Thu Feb 18 2021 20:19:14 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
