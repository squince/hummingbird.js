!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){(function(t){const e=i(2);(function(){var i;(i=function(t){return new e(t)}).loggingOn=!1,i.version="@@VERSION",i.index_version="@@INDEX_VERSION",null!==t&&(t.exports=i)}).call(this)}).call(this,i(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){i(3),i(4),i(5),i(6),i(7);(function(){hummingbird.Index=function(t){this.createTime=new Date,this.lastUpdate=null,this.tokenStore=new hummingbird.TokenStore,this.metaStore=new hummingbird.MetaStore,this.variantStore=null!=t?new hummingbird.VariantStore(t):new hummingbird.VariantStore,this.eventEmitter=new hummingbird.EventEmitter,this.tokenizer=new hummingbird.tokenizer,this.utils=new hummingbird.Utils},hummingbird.Index.prototype.on=function(){var t;return t=Array.prototype.slice.call(arguments),this.eventEmitter.addListener.apply(this.eventEmitter,t)},hummingbird.Index.prototype.off=function(t,e){return this.eventEmitter.removeListener(t,e)},hummingbird.Index.load=function(t){var e;return e=new this,t.index_version!==hummingbird.index_version&&e.utils.warn("version mismatch: current "+hummingbird.index_version+" importing "+t.index_version),e.tokenStore=hummingbird.TokenStore.load(t.tokenStore),e.metaStore=t.hasOwnProperty("metaStore")?hummingbird.MetaStore.load(t.metaStore):void 0,e.variantStore=t.hasOwnProperty("variantStore")?hummingbird.VariantStore.load(t.variantStore):void 0,e.createTime=null!=t.createTime?new Date(t.createTime):null,e.lastUpdate=null!=t.lastUpdate?new Date(t.lastUpdate):null,e},hummingbird.Index.prototype.add=function(t,e){if(e=void 0===e||e,this.metaStore.has(t.id))return hummingbird.loggingOn&&this.utils.debugLog(`Document ${t.id} already indexed, replacing`),void this.update(t,e);this._tokenizeDoc(t),this.metaStore.add(t),this.lastUpdate=new Date,e&&this.eventEmitter.emit("add",t,this)},hummingbird.Index.prototype._tokenizeDoc=function(t){var e,i,n,o,r,s,u,h;for(null!=(null!=t?t.name:void 0)?(u=this.tokenizer.tokenize(t.name),h=this.variantStore.getVariantTokens(t.name,this.tokenizer,u)):(hummingbird.loggingOn&&this.utils.debugLog("No 'name' property in doc\n"+JSON.stringify(t)),u=[],h=[]),e=0,n=u.length;e<n;e++)s=u[e],this.tokenStore.add(s,!1,t.id);for(r=[],i=0,o=h.length;i<o;i++)s=h[i],r.push(this.tokenStore.add(s,!0,t.id));return r},hummingbird.Index.prototype.remove=function(t,e){e=!(void 0!==e||!this.metaStore.has(t))||e,this.metaStore.has(t)&&(this.tokenStore.remove(t,this.tokenizer.tokenize(this.metaStore.get(t).name)),this.metaStore.remove(t),this.lastupdate=new Date,e&&this.eventEmitter.emit("remove",t,this))},hummingbird.Index.prototype.update=function(t,e){e=void 0===e||e,this.metaStore.has(t.id)&&(t.name!==this.metaStore.get(t.id).name?(this.remove(t.id,!1),this._tokenizeDoc(t)):this.metaStore.remove(t.id),this.metaStore.add(t),e&&this.eventEmitter.emit("update",t,this))},hummingbird.Index.prototype.search=function(t,e,i){var n,o,r,s,u,h,a,l,m,d,g,c,f,v,p,b,S,y;if(y=new Date,hummingbird.loggingOn&&this.utils.logTiming("find matching docs"),null==t||t.length<this.tokenizer.min-1)e([],{hbTotalTime:new Date-y});else{if(m=void 0===(null!=i?i.howMany:void 0)?10:Math.floor(i.howMany),d=void 0===(null!=i?i.startPos:void 0)?0:Math.floor(i.startPos),g=null!=i?i.boostPrefix:void 0,v=void 0===(null!=i?i.secondarySortField:void 0)?"name":i.secondarySortField,p=void 0===(null!=i?i.secondarySortOrder:void 0)?"asc":i.secondarySortOrder,o={},n=[],c=this.tokenizer.tokenize(t),h=this.utils.maxScore(t,this.tokenizer,g),null==(null!=i?i.scoreThreshold:void 0)?(l=.5*h,a=Math.ceil(.5*c.length)):(null!=i?i.scoreThreshold:void 0)<=0?(l=0,a=c.length):(null!=i?i.scoreThreshold:void 0)>=1?(l=h,a=0):(l=i.scoreThreshold*h,a=Math.ceil(c.length*(1-i.scoreThreshold))),c.some((function(t){return this.tokenStore.has(t)}),this)){for(u in c.forEach((function(t,e,i){var n,r,s;for(n in hummingbird.loggingOn&&(r=this.utils.logTiming(`'${t}' score start`)),this.tokenStore.get(t,!1))switch(!1){case!(null==o[n]&&e<=a):o[n]=this.utils.tokenScore(t,!1,g);break;case null==o[n]:o[n]+=this.utils.tokenScore(t,!1,g)}for(n in hummingbird.loggingOn&&(s=this.utils.logTiming(`\t\toriginal name:\t\t${Object.keys(this.tokenStore.get(t,!1)).length} `,r)),this.tokenStore.get(t,!0))switch(!1){case!(null==o[n]&&e<=a):o[n]=this.utils.tokenScore(t,!0,g);break;case null==o[n]:o[n]+=this.utils.tokenScore(t,!0,g)}hummingbird.loggingOn&&this.utils.logTiming(`\t\tvariant matches:\t${Object.keys(this.tokenStore.get(t,!0)).length} `,s)}),this),S=new Date,hummingbird.loggingOn&&this.utils.logTiming("hash to sorted array\n"),o)o[u]>=l&&(r=this.utils.normalizeString(t)===this.utils.normalizeString(this.metaStore.get(u).name),"name"===v?n.push({id:u,score:r?o[u]+.1:o[u],name:this.metaStore.get(u).name}):n.push({id:u,score:r?o[u]+.1:o[u],name:this.metaStore.get(u).name,custSortField:null!=this.metaStore.get(u)[v]?this.metaStore.get(u)[v]:void 0}));return b=new Date,n.sort((function(t,e){var i;return i=function(t,e,i,n){var o,r,s,u,h,a,l;return l="desc"===n?-1:1,o=null!=(null!=(s=t[i])?s.toLowerCase:void 0)?null!=(u=t[i])?u.toLowerCase():void 0:t[i],r=null!=(null!=(h=e[i])?h.toLowerCase:void 0)?null!=(a=e[i])?a.toLowerCase():void 0:e[i],null===o&&null!==r?1:null===r?-1:l*(o>r?1:o<r?-1:0)},t.score!==e.score?i(t,e,"score","desc"):"name"===v?i(t,e,"name",p):t.custSortField!==e.custSortField?i(t,e,"custSortField",p):i(t,e,"name","asc")})),f=n.slice(d,m),hummingbird.loggingOn&&(this.utils.debugLog("**********"),this.utils.debugLog("score\tname (id)")),e(f.map((function(t,e,i){return(t=this.metaStore.get(t.id)).score=Math.round(10*i[e].score)/10,hummingbird.loggingOn&&this.utils.debugLog(`${t.score}\t${t.name} (${t.id})`),t}),this),{hbTotalTime:(s=new Date)-y,findDocsTime:S-y,hashToArrayTime:b-S,sortArrayTime:s-b}),hummingbird.loggingOn?(this.utils.logTiming("SUMMARY:"),this.utils.debugLog(""),this.utils.debugLog("hash size:\t"+Object.keys(o).length.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.utils.debugLog("array size:\t"+n.length.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")),this.utils.debugLog("min score:\t"+l),this.utils.debugLog("max score:\t"+h),this.utils.debugLog(`query time:\t${s-y} ms`),this.utils.debugLog(`\t\t${S-y} ms - finding docs`),this.utils.debugLog(`\t\t${b-S} ms - sorting array`),this.utils.debugLog(`\t\t${s-b} ms - hash to array`),this.utils.debugLog("***************")):void 0}e([],{hbTotalTime:new Date-y})}},hummingbird.Index.prototype.jump=function(t,e){var i,n;return n=new Date,hummingbird.loggingOn&&this.utils.debugLog("**********"),hummingbird.loggingOn&&this.utils.logTiming("get matching doc"),null==t||t.length<1?e([],{hbTotalTime:new Date-n}):e(null!=(i=this.metaStore.get(t))?[i]:[],{hbTotalTime:new Date-n})},hummingbird.Index.prototype.toJSON=function(){return{version:hummingbird.version,index_version:hummingbird.index_version,tokenStore:this.tokenStore.toJSON(),metaStore:this.metaStore.toJSON(),variantStore:this.variantStore.toJSON(),createTime:this.createTime.getTime(),lastUpdate:this.lastUpdate.getTime()}}}).call(this)},function(t,e){(function(){hummingbird.EventEmitter=function(){this.events={}},hummingbird.EventEmitter.prototype.addListener=function(){var t,e,i;if(t=Array.prototype.slice.call(arguments),e=t.pop(),i=t,"function"!=typeof e)throw new TypeError("last argument must be a function");i.forEach((function(t){this.hasHandler(t)||(this.events[t]=[]),this.events[t].push(e)}),this)},hummingbird.EventEmitter.prototype.removeListener=function(t,e){var i;this.hasHandler(t)&&(i=this.events[t].indexOf(e),this.events[t].splice(i,1),this.events[t].length||delete this.events[t])},hummingbird.EventEmitter.prototype.emit=function(t){var e;this.hasHandler(t)&&(e=Array.prototype.slice.call(arguments,1),this.events[t].forEach((function(t){t.apply(void 0,e)})))},hummingbird.EventEmitter.prototype.hasHandler=function(t){return t in this.events}}).call(this)},function(t,e){(function(){hummingbird.MetaStore=function(){this.root={}},hummingbird.MetaStore.load=function(t){var e;return(e=new this).root=t.root,e},hummingbird.MetaStore.prototype.toJSON=function(){return{root:this.root}},hummingbird.MetaStore.prototype.add=function(t){this.has(t.id)||void 0===t||(this.root[t.id]=t)},hummingbird.MetaStore.prototype.has=function(t){return!!t&&t in this.root},hummingbird.MetaStore.prototype.get=function(t){return this.root[t]},hummingbird.MetaStore.prototype.remove=function(t){if(t&&this.root[t])return delete this.root[t]}}).call(this)},function(t,e){(function(){hummingbird.TokenStore=function(){this.root={}},hummingbird.TokenStore.load=function(t){var e;return(e=new this).root=t.root,e},hummingbird.TokenStore.prototype.toJSON=function(){return{root:this.root}},hummingbird.TokenStore.prototype.add=function(t,e,i){var n,o,r,s;null==(n=this.root)[t]&&(n[t]={}),e?null==(null!=(s=this.root[t].n)?s[i]:void 0)&&(null==(r=this.root[t]).v&&(r.v={}),this.root[t].v[i]=1):(null==(o=this.root[t]).n&&(o.n={}),this.root[t].n[i]=1)},hummingbird.TokenStore.prototype.has=function(t){return!!t&&t in this.root},hummingbird.TokenStore.prototype.get=function(t,e){var i,n,o,r;return e?null!=(i=null!=(n=this.root[t])?n.v:void 0)?i:{}:null!=(o=null!=(r=this.root[t])?r.n:void 0)?o:{}},hummingbird.TokenStore.prototype.count=function(t){var e,i,n;return t&&this.root[t]?(e=0,e+=Object.keys(null!=(i=this.root[t].n)?i:{}).length,e+=Object.keys(null!=(n=this.root[t].v)?n:{}).length):0},hummingbird.TokenStore.prototype.remove=function(t,e=Object.keys(this.root)){return e.forEach((function(e){var i,n;null!=(null!=(i=this.root[e].n)?i[t]:void 0)&&(delete this.root[e].n[t],0===Object.keys(this.root[e].n).length&&delete this.root[e].n),null!=(null!=(n=this.root[e].v)?n[t]:void 0)&&(delete this.root[e].n[t],0===Object.keys(this.root[e].v).length&&delete this.root[e].v),0===Object.keys(this.root[e]).length&&delete this.root[e]}),this)}}).call(this)},function(t,e){(function(){hummingbird.tokenizer=function(t,e){this.utils=new hummingbird.Utils,this.min=!arguments.length||null==t||"number"!=typeof t||t<1?3:t,this.max=arguments.length<2||null==e||"number"!=typeof e||e<t?this.min:e},hummingbird.tokenizer.prototype.tokenize=function(t){var e,i,n,o;if(null==(o=this.utils.normalizeString(t)))return[];for(e={},n=this.min;n<=this.max;){if(o.length<=n)e[o]=null;else for(i=0;i<=o.length-n;)e[o.slice(i,i+n)]=null,i++;n++}return Object.keys(e)}}).call(this)},function(t,e){(function(){hummingbird.VariantStore=function(t){var e,i;if(this.variants={},this.utils=new hummingbird.Utils,null!=t)for(e in t)i=this.utils.normalizeString(e),this.variants[i]=[],t[e].forEach((function(t,e,n){var o;return o=this.utils.normalizeString(t),this.variants[i].push(o)}),this)},hummingbird.VariantStore.load=function(t){var e;return(e=new this).variants=t.hasOwnProperty("variants")?t.variants:void 0,e},hummingbird.VariantStore.prototype.toJSON=function(){return{variants:this.variants}},hummingbird.VariantStore.prototype.getVariantTokens=function(t,e,i){var n,o;return[],o={},null==(n=this.utils.normalizeString(t))||void 0===n?o:(this.variants.hasOwnProperty(n)&&this.variants[n].forEach((function(t,n,r){var s,u,h,a,l;for(a=[],s=0,u=(h=e.tokenize(t)).length;s<u;s++)l=h[s],-1===i.indexOf(l)?a.push(o[l]=null):a.push(void 0);return a}),this),n!==n.split(/\s+/)[0]&&n.split(/\s+/).forEach((function(t,n,r){if(this.variants.hasOwnProperty(t))return this.variants[t].forEach((function(t,n,r){var s,u,h,a,l;for(a=[],s=0,u=(h=e.tokenize(t)).length;s<u;s++)l=h[s],-1===i.indexOf(l)?a.push(o[l]=null):a.push(void 0);return a}),this)}),this),Object.keys(o))}}).call(this)}]);