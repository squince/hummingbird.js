<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script> 
  <script src="../../hummingbird.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript" charset="utf-8">
    // set up the index, specifying that we want to index the title, tags and body fields of documents.
    var idx

    $(document).ready(function () {
      $.ajaxSetup({ cache: false })

      $("#searchTerm").keyup(searchText)

      console.time("load")
      $.getJSON('../coffee-repl/idx-countries.json')
      .success(function (indexData) {
        idx = hummingbird.Index.load(indexData)
      })
      console.timeEnd("load")
    })
  </script>
  <script type="text/javascript" charset="utf-8">
    function searchText() {
      
      $("#matchResultsList").empty();
      var searchTerm = $("#searchTerm").val().trim();
      if (!searchTerm || searchTerm.length < 2) {
        return;
      }

      console.time('search')
      idx.search(searchTerm, showResults)
      console.timeEnd('search')
    }

    function showResults(results) {
      
      var frag = document.createDocumentFragment();

      $.each(results, function( i, val ) {
        var li = document.createElement("li");
        li.innerHTML = val.id + " is " + val.name + " is located at " + val.lat + " degrees latitude and " + val.long + " degrees longitude";
        frag.appendChild(li);
      });

      $("#matchResultsList").append(frag);
    }

  </script>

  <style type="text/css" media="screen">

    body {
      background-color: #FFFFFF;
      color: #666666;
      font-family: 'Helvetica Neue';
      font-size: 16px;
    }

    input {
      width: 300px;
      font-size: 1.4em;
    }
  </style>
</head>
<body>
   <form>
     <label for="searchTerm">Type here ->&nbsp;&nbsp;</label>
     <input type="text" id="searchTerm" size="100" placeholder="United St...">
  </form>
  <div>
    <h3>Results</h2>
    <ul id="matchResultsList"/>
 </div>
</body>
